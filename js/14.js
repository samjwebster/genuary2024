function setup(){p = getPalette();rc = () => p.getRandomCol();R = random;createCanvas(w=500,500);background(lerpColor(rc(),color(random([0,255])), 0.8));strokeWeight(w*0.8);for(let i = 0; i < R(1,4); i++) {stroke(rc());line(-w,R(-3*w,3*w),2*w,R(-3*w,3*w));}x1=y1=x2=y2=0;c1=c2=null;d=R(5,20);for(i=0; i<R(3,20); i++) {x1=R(w);y1=R(w);c1=rc();if(x2!=0) {c = floor(dist(x1,y1,x2,y2)/d);v = createVector(x2-x1,y2-y1).normalize().rotate(PI/2).mult(50);for(let j = 0; j < c; j++) {t = j/(c-1);x=lerp(x1,x2,t);y=lerp(y1,y2,t);strokeWeight(R(2,5));stroke(lerpColor(c1,c2,t));fill(lerpColor(c1,c2,t));(t<0.5) ? t=2*t : t=1-(2*(t-0.5));t = 1-(1-t)*(1-t);line(x-t*v.x,y-t*v.y,x+t*v.x,y+t*v.y);if(R()>0.9) circle(x,y,R(2,5));if(R()>0.9) circle(x-t*v.x,y-t*v.y,R(2,5));if(R()>0.9) circle(x+t*v.x,y+t*v.y,R(2,5));}}x2=x1;y2=y1;c2=c1;}granulate(8)}